# Environment Configuration
# Copy this file to .env and update values as needed

# Application
ENVIRONMENT=development
APP_NAME=atlas-api
APP_VERSION=0.1.0
DEBUG=true
LOG_LEVEL=INFO
SECRET_KEY=your-secret-key-change-in-production-min-32-chars

# API Configuration
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=8
API_RELOAD=true
API_PREFIX=/api/v1
WORKER_CONNECTIONS=1000
MAX_REQUESTS=10000
MAX_REQUESTS_JITTER=1000

# CORS
CORS_ORIGINS='["http://localhost:3000","http://localhost:8000"]'
CORS_ALLOW_CREDENTIALS=true

# Database - PostgreSQL
DATABASE_URL=postgresql+asyncpg://atlas:atlas_dev@localhost:5432/atlas_dev
DATABASE_POOL_SIZE=100
DATABASE_MAX_OVERFLOW=50
DATABASE_POOL_TIMEOUT=30
DATABASE_POOL_RECYCLE=3600
DATABASE_ECHO=false

# Redis
REDIS_URL=redis://localhost:6379/0
REDIS_MAX_CONNECTIONS=50
REDIS_SOCKET_TIMEOUT=5
REDIS_SOCKET_CONNECT_TIMEOUT=5
REDIS_RETRY_ON_TIMEOUT=true
REDIS_DECODE_RESPONSES=true

# Kafka
KAFKA_BOOTSTRAP_SERVERS=localhost:9092
KAFKA_CLIENT_ID=atlas-api
KAFKA_GROUP_ID=atlas-api-group
KAFKA_AUTO_OFFSET_RESET=earliest
KAFKA_ENABLE_AUTO_COMMIT=false
KAFKA_MAX_POLL_RECORDS=500
KAFKA_SESSION_TIMEOUT_MS=30000
KAFKA_REQUEST_TIMEOUT_MS=40000

# MinIO / S3
MINIO_ENDPOINT=localhost:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_SECURE=false
MINIO_REGION=us-east-1
MINIO_BUCKET_NAME=atlas-data

# Observability - Prometheus
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
METRICS_NAMESPACE=atlas
METRICS_SUBSYSTEM=api

# Observability - OpenTelemetry
OTEL_ENABLED=true
OTEL_SERVICE_NAME=atlas-api
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
OTEL_TRACES_SAMPLER=parentbased_traceidratio
OTEL_TRACES_SAMPLER_ARG=1.0

# Reliability - Retry Configuration
RETRY_MAX_ATTEMPTS=3
RETRY_MULTIPLIER=2
RETRY_MIN_WAIT=1
RETRY_MAX_WAIT=10
RETRY_JITTER=true

# Reliability - Circuit Breaker
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
CIRCUIT_BREAKER_RECOVERY_TIMEOUT=60
CIRCUIT_BREAKER_EXPECTED_EXCEPTION=Exception

# Reliability - Timeouts (seconds)
HTTP_TIMEOUT=30
DATABASE_TIMEOUT=10
REDIS_TIMEOUT=5
KAFKA_TIMEOUT=30

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_BURST=10

# Background Workers
WORKER_CONCURRENCY=4
WORKER_PREFETCH_MULTIPLIER=4
WORKER_MAX_TASKS_PER_CHILD=1000

# Feature Flags
FEATURE_ML_SERVING=true
FEATURE_ASYNC_PROCESSING=true
FEATURE_CACHING=true
FEATURE_OUTBOX_PATTERN=true

# Security
JWT_SECRET_KEY=your-jwt-secret-key-change-in-production
JWT_ALGORITHM=HS256
JWT_EXPIRATION_MINUTES=30
JWT_REFRESH_EXPIRATION_DAYS=7

# Pagination
DEFAULT_PAGE_SIZE=20
MAX_PAGE_SIZE=100

# File Upload
MAX_UPLOAD_SIZE_MB=10
ALLOWED_UPLOAD_EXTENSIONS=.jpg,.jpeg,.png,.pdf,.csv,.json

# Testing
TEST_DATABASE_URL=postgresql+asyncpg://atlas:atlas_dev@localhost:5432/atlas_test

